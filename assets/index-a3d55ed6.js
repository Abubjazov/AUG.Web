import{b as y,d as C,j as e,c as w,z as V,A as W,e as G,n as Y,C as se,D as ae,F as re,G as oe,S as O,r as _,I as R,H as ne,J as le,K as z,h as ie,L as ce,N as de,O as pe,l as H,P as _e,Q as x,R as ue,U as me}from"./index-579504fb.js";import{u as te,a as ge}from"./dapplets-e3a21f7a.js";const he="_root_1pdcs_1",xe="_button_1pdcs_11",J={root:he,"tag-root":"_tag-root_1pdcs_7",button:xe},Q=({userStyles:s="",dappletId:t,dappletUserTags:r,dappletCommunityTags:a,dappletState:c,dappletOperationGoing:i=[]})=>{const l=te(),{userTags:o}=y(d=>d.userData),p=C(),h=d=>{p(se({dappletId:t,userTagId:d}))},m=d=>{d.stopPropagation(),p(ae(e.jsx(re,{dappletId:t}))),p(oe(!0))};return e.jsxs("div",{className:w([J.root,s]),children:[r&&typeof r!="string"&&r.map(d=>{const N=!!i.filter(u=>u.dappletId===t&&u.userTagId===d.tagId&&u.operation===V.REMOVE_USER_TAG).length;return e.jsx(W,{mode:G.MY_TAG,tagId:d.tagId,label:d.tagName,onClick:h,loading:N},Y())}),a&&typeof a!="string"&&a.map(d=>e.jsx(W,{mode:G.COMMUNITY_TAG,tagId:d.tagId,label:d.tagName},Y())),l<=1366&&c&&(o!=null&&o.length)?e.jsx("button",{type:"button","data-testid":"add-tag-button",className:J.button,onClick:m,children:"+"}):null]})},je="_root_l648f_1",fe="_title_l648f_7",Ne="_text_l648f_16",P={root:je,title:fe,text:Ne},b=({userStyles:s="",title:t,text:r})=>e.jsxs("div",{className:w([P.root,s]),children:[e.jsx("span",{className:P.title,children:t}),e.jsx("span",{className:P.text,children:r})]}),S=(s,t)=>s!=="N/A"&&!isNaN(Number(s))?new Intl.NumberFormat("en-US").format(Number(s))+` ${t}`:s,ve="_root_6d3jl_1",be="_wrapper_6d3jl_8",ye="_red_6d3jl_15",we="_green_6d3jl_19",De="_title_6d3jl_23",M={root:ve,wrapper:be,red:ye,green:we,title:De},E=({userStyles:s="",title:t,value:r})=>{const a=Number(r)>=0?"green":"red";return e.jsxs("div",{className:M.root,children:[t&&e.jsx("span",{className:M.title,children:t}),e.jsxs("div",{className:w([M.wrapper,s,M[a]]),children:[e.jsx(O,{icon:`${a}Triangle`}),S(r,"%")]})]})},Se=s=>s!=="N/A"&&!isNaN(Number(s))?new Date(Number(s)*1e3).toLocaleDateString():s,Ae="_root_lwcya_1",Ie="_burger_lwcya_20",Ee="_logo_lwcya_60",n={root:Ae,burger:Ie,"main-part":"_main-part_lwcya_27","additional-part":"_additional-part_lwcya_35","additional-fields":"_additional-fields_lwcya_42","main-descriptor":"_main-descriptor_lwcya_49","additional-descriptor":"_additional-descriptor_lwcya_54",logo:Ee,"dapplet-name-wrapper":"_dapplet-name-wrapper_lwcya_64","dapplet-name":"_dapplet-name_lwcya_64","dapplet-short-name":"_dapplet-short-name_lwcya_80","dapplet-market-cap":"_dapplet-market-cap_lwcya_85","dapplet-descriptor":"_dapplet-descriptor_lwcya_93","dapplet-owner":"_dapplet-owner_lwcya_102","main-part-header":"_main-part-header_lwcya_110","main-part-logo-wrapper":"_main-part-logo-wrapper_lwcya_117","dapplet-installbuttons-wrapper":"_dapplet-installbuttons-wrapper_lwcya_123"},Ce=({userStyles:s="",dapplet:t,dappletUserTags:r,dappletCommunityTags:a,dragOver:c})=>{const i=C(),{dappletOperationGoing:l}=y(g=>g.userData),[o,p]=_.useState(!1),h=te(),m=()=>{p(!o)},d=g=>{g.preventDefault(),c&&c()},N=g=>{const T=g.dataTransfer.getData("mode"),j=g.dataTransfer.getData("tagId"),v=t.dappletId;T===G.MY_TAG&&i(le({dappletId:v,userTagId:j}))},u=()=>!!l.filter(g=>g.dappletId===t.dappletId&&(g.operation===V.INSTALL||g.operation===V.UNINSTALL)).length,I=()=>e.jsxs("div",{className:w([n.root,s]),onClick:m,onDrop:N,onDragOver:d,"data-testid":"dapplet",children:[e.jsxs("div",{className:n["main-part"],children:[e.jsxs("div",{className:n["main-part-header"],children:[e.jsxs("div",{className:n["main-part-logo-wrapper"],children:[e.jsx("img",{className:n.logo,width:"50px",height:"50px",src:t.logo,alt:"Company`s logo"}),e.jsxs("div",{className:n["dapplet-name-wrapper"],children:[e.jsx("span",{className:n["dapplet-name"],children:t.name}),e.jsx("span",{className:n["dapplet-owner"],children:t.appOwner})]})]}),e.jsxs("div",{className:n["dapplet-installbuttons-wrapper"],children:[e.jsx(R,{mobile:!0,dappletId:t.dappletId,loading:u()}),o&&e.jsx(R,{mobile:!0,setMode:ne.UNINSTALL,dappletId:t.dappletId})]})]}),e.jsx("span",{className:n["dapplet-descriptor"],children:t.shortDesc}),e.jsx(Q,{dappletId:t.dappletId,dappletState:o,dappletOperationGoing:l,dappletUserTags:r,dappletCommunityTags:a})]}),o&&e.jsxs("div",{className:n["additional-part"],children:[e.jsx(b,{userStyles:n["main-descriptor"],title:"About",text:t.fullDesc}),e.jsxs("div",{className:n["additional-fields"],children:[e.jsx(E,{title:"Market cap",value:t.marketCap,userStyles:n["additional-descriptor"]}),e.jsx(E,{title:"Volume (24h)",value:t.volume,userStyles:n["additional-descriptor"]})]})]})]}),k=()=>e.jsxs("div",{className:w([n.root,s]),onDrop:N,onDragOver:d,"data-testid":"dapplet",children:[e.jsxs("div",{className:n["main-part"],children:[e.jsx("div",{className:n.burger,onClick:m,"data-testid":"dapplet-burger-button",children:e.jsx(O,{icon:"burger"})}),e.jsx("img",{className:n.logo,src:t.logo,width:"50px",height:"50px",alt:"Company`s logo"}),e.jsxs("div",{className:n["dapplet-name-wrapper"],children:[e.jsxs("span",{className:n["dapplet-name"],children:[t.name," ",e.jsx("span",{className:n["dapplet-short-name"],children:t.shortName})]}),e.jsx(E,{value:t.marketCap,userStyles:n["dapplet-market-cap"]})]}),e.jsx("span",{className:n["dapplet-descriptor"],children:t.shortDesc}),e.jsx("span",{className:n["dapplet-owner"],children:t.appOwner}),e.jsx(Q,{dappletId:t.dappletId,dappletState:o,dappletOperationGoing:l,dappletUserTags:r,dappletCommunityTags:a}),e.jsx(R,{dappletId:t.dappletId,loading:u()})]}),o&&e.jsxs("div",{className:n["additional-part"],children:[e.jsx(b,{userStyles:n["main-descriptor"],title:"About",text:t.fullDesc}),e.jsxs("div",{className:n["additional-fields"],children:[e.jsx(E,{title:"Market cap",value:t.marketCap,userStyles:n["additional-descriptor"]}),e.jsx(E,{title:"Volume (24h)",value:t.volume,userStyles:n["additional-descriptor"]}),e.jsx(b,{userStyles:n["additional-descriptor"],title:"Volume/Market cap (24h)",text:S(t.volumePerMarketCap,"%")}),e.jsx(b,{userStyles:n["additional-descriptor"],title:"Circulating supply",text:S(t.circulatingSupply,t.shortName)}),e.jsx(b,{userStyles:n["additional-descriptor"],title:"Total supply",text:S(t.totalSupply,t.shortName)}),e.jsx(b,{userStyles:n["additional-descriptor"],title:"Max. supply",text:S(t.maxSupply,t.shortName)}),e.jsx(b,{userStyles:n["additional-descriptor"],title:"Fully diluted market cap",text:S(t.fullyDilutedMarketCap,"$")}),e.jsx(b,{userStyles:n["additional-descriptor"],title:"Launched at",text:Se(t.date)})]})]})]});return h<=880?I():k()},ke=()=>{const{dapplets:s,searchString:t}=y(c=>c.dapplets),[r,a]=_.useState(void 0);return _.useEffect(()=>{if(s!=null&&s.length&&t!==""){const c=s.filter(i=>i.name.toLowerCase().includes(t.toLowerCase()));a(c)}else a(s)},[s,t]),{items:r}};var A=(s=>(s.WAITING="waiting",s.LOADING="loading",s.ADDING_DAPPLETS="adding dapplets",s.NO_DAPPLETS_AVAILABLE="No dapplets available",s))(A||{});const Te=()=>{const{isLoadingDapplets:s,isLoadingMoreDapplets:t}=y(l=>l.dapplets),{isLoadingUserData:r}=y(l=>l.userData),{items:a}=ke(),[c,i]=_.useState("loading");return _.useEffect(()=>{(s||r)&&i("loading"),!s&&!r&&(a!=null&&a.length)&&i("waiting"),!s&&!r&&!(a!=null&&a.length)&&i("No dapplets available"),t&&!s&&i("adding dapplets")},[s,r,a==null?void 0:a.length,t]),{items:a,status:c}};var U=new Map,L=new WeakMap,q=0,Me=void 0;function Le(s){return s?(L.has(s)||(q+=1,L.set(s,q.toString())),L.get(s)):"0"}function Oe(s){return Object.keys(s).sort().filter(t=>s[t]!==void 0).map(t=>`${t}_${t==="root"?Le(s.root):s[t]}`).toString()}function Be(s){let t=Oe(s),r=U.get(t);if(!r){const a=new Map;let c;const i=new IntersectionObserver(l=>{l.forEach(o=>{var p;const h=o.isIntersecting&&c.some(m=>o.intersectionRatio>=m);s.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=h),(p=a.get(o.target))==null||p.forEach(m=>{m(h,o)})})},s);c=i.thresholds||(Array.isArray(s.threshold)?s.threshold:[s.threshold||0]),r={id:t,observer:i,elements:a},U.set(t,r)}return r}function Re(s,t,r={},a=Me){if(typeof window.IntersectionObserver>"u"&&a!==void 0){const p=s.getBoundingClientRect();return t(a,{isIntersecting:a,target:s,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:p,intersectionRect:p,rootBounds:p}),()=>{}}const{id:c,observer:i,elements:l}=Be(r);let o=l.get(s)||[];return l.has(s)||l.set(s,o),o.push(t),i.observe(s),function(){o.splice(o.indexOf(t),1),o.length===0&&(l.delete(s),i.unobserve(s)),l.size===0&&(i.disconnect(),U.delete(c))}}function Pe({threshold:s,delay:t,trackVisibility:r,rootMargin:a,root:c,triggerOnce:i,skip:l,initialInView:o,fallbackInView:p,onChange:h}={}){var m;const[d,N]=_.useState(null),u=_.useRef(),[I,k]=_.useState({inView:!!o,entry:void 0});u.current=h,_.useEffect(()=>{if(l||!d)return;let v;return v=Re(d,(K,B)=>{k({inView:K,entry:B}),u.current&&u.current(K,B),B.isIntersecting&&i&&v&&(v(),v=void 0)},{root:c,rootMargin:a,threshold:s,trackVisibility:r,delay:t},p),()=>{v&&v()}},[Array.isArray(s)?s.toString():s,d,c,a,i,l,r,p,t]);const g=(m=I.entry)==null?void 0:m.target,T=_.useRef();!d&&g&&!i&&!l&&T.current!==g&&(T.current=g,k({inView:!!o,entry:void 0}));const j=[N,I.inView,I.entry];return j.ref=j[0],j.inView=j[1],j.entry=j[2],j}const $e="_fallback_st6kg_1",Fe="_text_st6kg_9",Ve="_objects_st6kg_25",f={fallback:$e,text:Fe,"central-body":"_central-body_st6kg_15","spin-earth-on-hover":"_spin-earth-on-hover_st6kg_20",objects:Ve,"object-rocket":"_object-rocket_st6kg_30","rocket-movement":"_rocket-movement_st6kg_1","object-earth":"_object-earth_st6kg_39","object-moon":"_object-moon_st6kg_46","spin-earth":"_spin-earth_st6kg_20"},Ge=({text:s})=>e.jsx("div",{className:f.fallback,children:e.jsx("div",{className:f.stars,children:e.jsxs("div",{className:f["central-body"],children:[e.jsx("span",{className:f.text,children:s}),e.jsxs("div",{className:f.objects,children:[e.jsx("img",{className:f["object-rocket"],src:"images/rocket.svg",width:"40px"}),e.jsxs("div",{className:f["earth-moon"],children:[e.jsx("img",{className:f["object-earth"],src:"images/earth.svg",width:"100px"}),e.jsx("img",{className:f["object-moon"],src:"images/moon.svg",width:"80px"})]})]})]})})}),X=(s,t,r)=>{let a=r.filter(i=>i.dappletId===s)[0],c=[];return a&&Object.prototype.hasOwnProperty.call(a,"communityTags")&&(a=a,c=a.communityTags),a&&Object.prototype.hasOwnProperty.call(a,"userTags")&&(a=a,c=a.userTags),c.length?c.map(l=>{var p;const o=(p=t.filter(h=>h.tagId===l)[0])==null?void 0:p.tagName;return{tagId:l,tagName:o}}):[]},Ye="_root_v8hzi_1",Ue="_fallback_v8hzi_11",Ke="_spinner_v8hzi_19",$={root:Ye,fallback:Ue,spinner:Ke},We=()=>{const{tags:s,loadFilter:t,isLoadingDapplets:r,lastVisible:a}=y(u=>u.dapplets),{userDapplets:c,userTags:i,isLoadingUserData:l}=y(u=>u.userData),{items:o,status:p}=Te(),{ref:h,inView:m}=Pe(),d=C(),N=async()=>{await d(ge({...t}))};return _.useEffect(()=>{m&&a!==z.NO_MORE_DAPPLETS&&!r&&d(ie({...t,withStartAfter:a}))},[m]),_.useEffect(()=>{!l&&!r&&N()},[l,t]),_.useEffect(()=>(d(ce()),()=>{d(de(!0)),d(pe(void 0))}),[]),e.jsxs("div",{className:$.root,children:[p===A.LOADING&&e.jsx("div",{className:$.fallback,children:e.jsx(H,{})}),(p===A.WAITING||p===A.ADDING_DAPPLETS)&&o&&o.map(u=>e.jsx(Ce,{dapplet:u,dappletUserTags:X(u.dappletId,i,c),dappletCommunityTags:X(u.dappletId,s,o)},Y())),p===A.NO_DAPPLETS_AVAILABLE&&e.jsx(Ge,{text:"No dapplets available"}),p===A.ADDING_DAPPLETS&&e.jsx("div",{className:$.spinner,children:e.jsx(H,{width:100,height:50,strokeWidth:3})}),a!==z.NO_MORE_DAPPLETS&&e.jsx("div",{ref:h,style:{height:0}})]})},ze="_root_xpfc3_1",He="_option_xpfc3_40",D={root:ze,"span-wrapper":"_span-wrapper_xpfc3_16",option:He,"drop-down":"_drop-down_xpfc3_44"},Je=({userStyles:s=""})=>{const{orderBy:t}=y(o=>o.dapplets),[r,a]=_.useState(!1),c=C();_.useEffect(()=>{c(_e())},[t]);const i=()=>a(!r),l=o=>{c(ue(o)),i()};return e.jsxs("div",{className:w([D.root,s]),children:[e.jsxs("div",{className:D["span-wrapper"],onClick:i,"data-testid":"open-dropdown",children:[e.jsx("span",{style:t?{padding:0}:{padding:0,color:"#7F7F7F"},children:t||"orderBy"}),e.jsx(O,{icon:"arrowDown"})]}),r&&e.jsxs("div",{className:D["drop-down"],onMouseLeave:i,children:[e.jsx("div",{className:D.option,style:{borderTopRightRadius:"10px",borderTopLeftRadius:"10px"},children:e.jsx("span",{style:t===x.ASC_BY_NAME?{color:"#7F7F7F"}:{},onClick:()=>l(x.ASC_BY_NAME),children:x.ASC_BY_NAME})}),e.jsx("span",{className:D.option,style:t===x.DESC_BY_NAME?{color:"#7F7F7F"}:{},onClick:()=>l(x.DESC_BY_NAME),children:x.DESC_BY_NAME}),e.jsx("span",{className:D.option,style:t===x.ASC_BY_MARKET_CAP?{color:"#7F7F7F"}:{},onClick:()=>l(x.ASC_BY_MARKET_CAP),children:x.ASC_BY_MARKET_CAP}),e.jsx("div",{className:D.option,style:{borderBottomRightRadius:"10px",borderBottomLeftRadius:"10px"},children:e.jsx("span",{style:t===x.DESC_BY_MARKET_CAP?{color:"#7F7F7F"}:{},onClick:()=>l(x.DESC_BY_MARKET_CAP),children:x.DESC_BY_MARKET_CAP})})]})]})};function Qe(s,t){const[r,a]=_.useState(s);return _.useEffect(()=>{const c=setTimeout(()=>{a(s)},t);return()=>{clearTimeout(c)}},[s]),r}const qe="_root_ld61j_1",Xe="_glass_ld61j_20",Z={root:qe,glass:Xe},Ze=({userStyles:s="",placeholder:t})=>{const r=C(),[a,c]=_.useState(""),i=Qe(a,300);return _.useEffect(()=>{r(me(i))},[i]),e.jsxs("div",{className:w([Z.root,s]),children:[e.jsx(O,{userStyles:Z.glass,icon:"glass"}),e.jsx("input",{type:"text",name:"searchinput",maxLength:30,placeholder:t,value:a,onChange:l=>c(l.target.value)})]})},et="_root_1hvr8_1",tt="_margin_1hvr8_7",ee={root:et,margin:tt},st=({userStyles:s=""})=>e.jsxs("div",{className:w([ee.root,s]),children:[e.jsx(Ze,{placeholder:"Search"}),e.jsx(Je,{userStyles:ee.margin})]}),at="_root_3eyn4_1",rt="_divider_3eyn4_17",F={root:at,"root-wrapper":"_root-wrapper_3eyn4_10",divider:rt},ot=()=>e.jsx("div",{className:F.root,children:e.jsxs("div",{className:F["root-wrapper"],children:[e.jsx(st,{}),e.jsx("div",{className:F.divider}),e.jsx(We,{})]})}),it=ot;export{it as default};
