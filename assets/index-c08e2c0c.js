import{b as N,d as A,j as e,c as v,z as O,A as R,e as P,n as B,C as q,D as X,F as Z,G as ee,S as k,r as p,I as C,H as te,J as se,K as E,h as ae,L as oe,N as re,O as ne,l as $,P as le,Q as m,R as ce,U as ie}from"./index-fd1ccbe2.js";import{u as H,a as de}from"./dapplets-0ed6e74d.js";const pe="_root_1pdcs_1",_e="_button_1pdcs_11",F={root:pe,"tag-root":"_tag-root_1pdcs_7",button:_e},G=({userStyles:s="",dappletId:t,dappletUserTags:n,dappletCommunityTags:a,dappletState:r,dappletOperationGoing:l=[]})=>{const i=H(),{userTags:d}=N(c=>c.userData),_=A(),u=c=>{_(q({dappletId:t,userTagId:c}))},f=c=>{c.stopPropagation(),_(X(e.jsx(Z,{dappletId:t}))),_(ee(!0))};return e.jsxs("div",{className:v([F.root,s]),children:[n&&typeof n!="string"&&n.map(c=>{const h=!!l.filter(y=>y.dappletId===t&&y.userTagId===c.tagId&&y.operation===O.REMOVE_USER_TAG).length;return e.jsx(R,{mode:P.MY_TAG,tagId:c.tagId,label:c.tagName,onClick:u,loading:h},B())}),a&&typeof a!="string"&&a.map(c=>e.jsx(R,{mode:P.COMMUNITY_TAG,tagId:c.tagId,label:c.tagName},B())),i<=1366&&r&&(d!=null&&d.length)?e.jsx("button",{type:"button","data-testid":"add-tag-button",className:F.button,onClick:f,children:"+"}):null]})},me="_root_l648f_1",ue="_title_l648f_7",he="_text_l648f_16",L={root:me,title:ue,text:he},j=({userStyles:s="",title:t,text:n})=>e.jsxs("div",{className:v([L.root,s]),children:[e.jsx("span",{className:L.title,children:t}),e.jsx("span",{className:L.text,children:n})]}),w=(s,t)=>s!=="N/A"&&!isNaN(Number(s))?new Intl.NumberFormat("en-US").format(Number(s))+` ${t}`:s,ge="_root_6d3jl_1",xe="_wrapper_6d3jl_8",je="_red_6d3jl_15",Ne="_green_6d3jl_19",ve="_title_6d3jl_23",I={root:ge,wrapper:xe,red:je,green:Ne,title:ve},S=({userStyles:s="",title:t,value:n})=>{const a=Number(n)>=0?"green":"red";return e.jsxs("div",{className:I.root,children:[t&&e.jsx("span",{className:I.title,children:t}),e.jsxs("div",{className:v([I.wrapper,s,I[a]]),children:[e.jsx(k,{icon:`${a}Triangle`}),w(n,"%")]})]})},ye=s=>s!=="N/A"&&!isNaN(Number(s))?new Date(Number(s)*1e3).toLocaleDateString():s,De="_root_lwcya_1",fe="_burger_lwcya_20",we="_logo_lwcya_60",o={root:De,burger:fe,"main-part":"_main-part_lwcya_27","additional-part":"_additional-part_lwcya_35","additional-fields":"_additional-fields_lwcya_42","main-descriptor":"_main-descriptor_lwcya_49","additional-descriptor":"_additional-descriptor_lwcya_54",logo:we,"dapplet-name-wrapper":"_dapplet-name-wrapper_lwcya_64","dapplet-name":"_dapplet-name_lwcya_64","dapplet-short-name":"_dapplet-short-name_lwcya_80","dapplet-market-cap":"_dapplet-market-cap_lwcya_85","dapplet-descriptor":"_dapplet-descriptor_lwcya_93","dapplet-owner":"_dapplet-owner_lwcya_102","main-part-header":"_main-part-header_lwcya_110","main-part-logo-wrapper":"_main-part-logo-wrapper_lwcya_117","dapplet-installbuttons-wrapper":"_dapplet-installbuttons-wrapper_lwcya_123"},be=({userStyles:s="",dapplet:t,dappletUserTags:n,dappletCommunityTags:a,dragOver:r})=>{const l=A(),{dappletOperationGoing:i}=N(g=>g.userData),[d,_]=p.useState(!1),u=H(),f=()=>{_(!d)},c=g=>{g.preventDefault(),r&&r()},h=g=>{const z=g.dataTransfer.getData("mode"),J=g.dataTransfer.getData("tagId"),Q=t.dappletId;z===P.MY_TAG&&l(se({dappletId:Q,userTagId:J}))},y=()=>!!i.filter(g=>g.dappletId===t.dappletId&&(g.operation===O.INSTALL||g.operation===O.UNINSTALL)).length,K=()=>e.jsxs("div",{className:v([o.root,s]),onClick:f,onDrop:h,onDragOver:c,"data-testid":"dapplet",children:[e.jsxs("div",{className:o["main-part"],children:[e.jsxs("div",{className:o["main-part-header"],children:[e.jsxs("div",{className:o["main-part-logo-wrapper"],children:[e.jsx("img",{className:o.logo,width:"50px",height:"50px",src:t.logo,alt:"Company`s logo"}),e.jsxs("div",{className:o["dapplet-name-wrapper"],children:[e.jsx("span",{className:o["dapplet-name"],children:t.name}),e.jsx("span",{className:o["dapplet-owner"],children:t.appOwner})]})]}),e.jsxs("div",{className:o["dapplet-installbuttons-wrapper"],children:[e.jsx(C,{mobile:!0,dappletId:t.dappletId,loading:y()}),d&&e.jsx(C,{mobile:!0,setMode:te.UNINSTALL,dappletId:t.dappletId})]})]}),e.jsx("span",{className:o["dapplet-descriptor"],children:t.shortDesc}),e.jsx(G,{dappletId:t.dappletId,dappletState:d,dappletOperationGoing:i,dappletUserTags:n,dappletCommunityTags:a})]}),d&&e.jsxs("div",{className:o["additional-part"],children:[e.jsx(j,{userStyles:o["main-descriptor"],title:"About",text:t.fullDesc}),e.jsxs("div",{className:o["additional-fields"],children:[e.jsx(S,{title:"Market cap",value:t.marketCap,userStyles:o["additional-descriptor"]}),e.jsx(S,{title:"Volume (24h)",value:t.volume,userStyles:o["additional-descriptor"]})]})]})]}),W=()=>e.jsxs("div",{className:v([o.root,s]),onDrop:h,onDragOver:c,"data-testid":"dapplet",children:[e.jsxs("div",{className:o["main-part"],children:[e.jsx("div",{className:o.burger,onClick:f,"data-testid":"dapplet-burger-button",children:e.jsx(k,{icon:"burger"})}),e.jsx("img",{className:o.logo,src:t.logo,width:"50px",height:"50px",alt:"Company`s logo"}),e.jsxs("div",{className:o["dapplet-name-wrapper"],children:[e.jsxs("span",{className:o["dapplet-name"],children:[t.name," ",e.jsx("span",{className:o["dapplet-short-name"],children:t.shortName})]}),e.jsx(S,{value:t.marketCap,userStyles:o["dapplet-market-cap"]})]}),e.jsx("span",{className:o["dapplet-descriptor"],children:t.shortDesc}),e.jsx("span",{className:o["dapplet-owner"],children:t.appOwner}),e.jsx(G,{dappletId:t.dappletId,dappletState:d,dappletOperationGoing:i,dappletUserTags:n,dappletCommunityTags:a}),e.jsx(C,{dappletId:t.dappletId,loading:y()})]}),d&&e.jsxs("div",{className:o["additional-part"],children:[e.jsx(j,{userStyles:o["main-descriptor"],title:"About",text:t.fullDesc}),e.jsxs("div",{className:o["additional-fields"],children:[e.jsx(S,{title:"Market cap",value:t.marketCap,userStyles:o["additional-descriptor"]}),e.jsx(S,{title:"Volume (24h)",value:t.volume,userStyles:o["additional-descriptor"]}),e.jsx(j,{userStyles:o["additional-descriptor"],title:"Volume/Market cap (24h)",text:w(t.volumePerMarketCap,"%")}),e.jsx(j,{userStyles:o["additional-descriptor"],title:"Circulating supply",text:w(t.circulatingSupply,t.shortName)}),e.jsx(j,{userStyles:o["additional-descriptor"],title:"Total supply",text:w(t.totalSupply,t.shortName)}),e.jsx(j,{userStyles:o["additional-descriptor"],title:"Max. supply",text:w(t.maxSupply,t.shortName)}),e.jsx(j,{userStyles:o["additional-descriptor"],title:"Fully diluted market cap",text:w(t.fullyDilutedMarketCap,"$")}),e.jsx(j,{userStyles:o["additional-descriptor"],title:"Launched at",text:ye(t.date)})]})]})]});return u<=880?K():W()},Se=()=>{const{dapplets:s,searchString:t}=N(r=>r.dapplets),[n,a]=p.useState(void 0);return p.useEffect(()=>{if(s!=null&&s.length&&t!==""){const r=s.filter(l=>l.name.toLowerCase().includes(t.toLowerCase()));a(r)}else a(s)},[s,t]),{items:n}};var b=(s=>(s.WAITING="waiting",s.LOADING="loading",s.ADDING_DAPPLETS="adding dapplets",s.NO_DAPPLETS_AVAILABLE="No dapplets available",s))(b||{});const Ae=()=>{const{isLoadingDapplets:s,loadFilter:t,lastVisible:n}=N(h=>h.dapplets),{isLoadingUserData:a}=N(h=>h.userData),{items:r}=Se(),[l,i]=p.useState(!1),[d,_]=p.useState("loading"),u=A(),f=async()=>{await u(de({...t}))},c=h=>{h.preventDefault(),document.documentElement.getBoundingClientRect().bottom===document.documentElement.clientHeight&&i(!0)};return p.useEffect(()=>{(s||a)&&_("loading"),!s&&!a&&(r!=null&&r.length)&&_("waiting"),!s&&!a&&!(r!=null&&r.length)&&_("No dapplets available"),l&&n!==E.NO_MORE_DAPPLETS&&!s&&_("adding dapplets")},[s,a,r==null?void 0:r.length,l,n]),p.useEffect(()=>{n!==E.NO_MORE_DAPPLETS&&i(!1),n===E.NO_MORE_DAPPLETS&&i(!0)},[n]),p.useEffect(()=>{l&&n!==E.NO_MORE_DAPPLETS&&!s&&u(ae({...t,withStartAfter:n}))},[l]),p.useEffect(()=>{!a&&!s&&f()},[a,t]),p.useEffect(()=>(u(oe()),document.addEventListener("scroll",c),document.addEventListener("touchend",c),()=>{u(re(!0)),u(ne(void 0)),document.removeEventListener("scroll",c),document.removeEventListener("touchend",c)}),[]),{status:d,items:r}},Ee="_fallback_st6kg_1",Ie="_text_st6kg_9",ke="_objects_st6kg_25",x={fallback:Ee,text:Ie,"central-body":"_central-body_st6kg_15","spin-earth-on-hover":"_spin-earth-on-hover_st6kg_20",objects:ke,"object-rocket":"_object-rocket_st6kg_30","rocket-movement":"_rocket-movement_st6kg_1","object-earth":"_object-earth_st6kg_39","object-moon":"_object-moon_st6kg_46","spin-earth":"_spin-earth_st6kg_20"},Ce=({text:s})=>e.jsx("div",{className:x.fallback,children:e.jsx("div",{className:x.stars,children:e.jsxs("div",{className:x["central-body"],children:[e.jsx("span",{className:x.text,children:s}),e.jsxs("div",{className:x.objects,children:[e.jsx("img",{className:x["object-rocket"],src:"images/rocket.svg",width:"40px"}),e.jsxs("div",{className:x["earth-moon"],children:[e.jsx("img",{className:x["object-earth"],src:"images/earth.svg",width:"100px"}),e.jsx("img",{className:x["object-moon"],src:"images/moon.svg",width:"80px"})]})]})]})})}),V=(s,t,n)=>{let a=n.filter(l=>l.dappletId===s)[0],r=[];return a&&Object.prototype.hasOwnProperty.call(a,"communityTags")&&(a=a,r=a.communityTags),a&&Object.prototype.hasOwnProperty.call(a,"userTags")&&(a=a,r=a.userTags),r.length?r.map(i=>{var _;const d=(_=t.filter(u=>u.tagId===i)[0])==null?void 0:_.tagName;return{tagId:i,tagName:d}}):[]},Le="_root_v8hzi_1",Te="_fallback_v8hzi_11",Me="_spinner_v8hzi_19",T={root:Le,fallback:Te,spinner:Me},Oe=()=>{const{tags:s}=N(l=>l.dapplets),{userDapplets:t,userTags:n}=N(l=>l.userData),{status:a,items:r}=Ae();return e.jsxs("div",{className:T.root,children:[a===b.LOADING&&e.jsx("div",{className:T.fallback,children:e.jsx($,{})}),(a===b.WAITING||a===b.ADDING_DAPPLETS)&&r&&r.map(l=>e.jsx(be,{dapplet:l,dappletUserTags:V(l.dappletId,n,t),dappletCommunityTags:V(l.dappletId,s,r)},B())),a===b.NO_DAPPLETS_AVAILABLE&&e.jsx(Ce,{text:"No dapplets available"}),a===b.ADDING_DAPPLETS&&e.jsx("div",{className:T.spinner,children:e.jsx($,{width:100,height:50,strokeWidth:3})})]})},Pe="_root_xpfc3_1",Be="_option_xpfc3_40",D={root:Pe,"span-wrapper":"_span-wrapper_xpfc3_16",option:Be,"drop-down":"_drop-down_xpfc3_44"},Re=({userStyles:s=""})=>{const{orderBy:t}=N(d=>d.dapplets),[n,a]=p.useState(!1),r=A();p.useEffect(()=>{r(le())},[t]);const l=()=>a(!n),i=d=>{r(ce(d)),l()};return e.jsxs("div",{className:v([D.root,s]),children:[e.jsxs("div",{className:D["span-wrapper"],onClick:l,"data-testid":"open-dropdown",children:[e.jsx("span",{style:t?{padding:0}:{padding:0,color:"#7F7F7F"},children:t||"orderBy"}),e.jsx(k,{icon:"arrowDown"})]}),n&&e.jsxs("div",{className:D["drop-down"],onMouseLeave:l,children:[e.jsx("div",{className:D.option,style:{borderTopRightRadius:"10px",borderTopLeftRadius:"10px"},children:e.jsx("span",{style:t===m.ASC_BY_NAME?{color:"#7F7F7F"}:{},onClick:()=>i(m.ASC_BY_NAME),children:m.ASC_BY_NAME})}),e.jsx("span",{className:D.option,style:t===m.DESC_BY_NAME?{color:"#7F7F7F"}:{},onClick:()=>i(m.DESC_BY_NAME),children:m.DESC_BY_NAME}),e.jsx("span",{className:D.option,style:t===m.ASC_BY_MARKET_CAP?{color:"#7F7F7F"}:{},onClick:()=>i(m.ASC_BY_MARKET_CAP),children:m.ASC_BY_MARKET_CAP}),e.jsx("div",{className:D.option,style:{borderBottomRightRadius:"10px",borderBottomLeftRadius:"10px"},children:e.jsx("span",{style:t===m.DESC_BY_MARKET_CAP?{color:"#7F7F7F"}:{},onClick:()=>i(m.DESC_BY_MARKET_CAP),children:m.DESC_BY_MARKET_CAP})})]})]})};function $e(s,t){const[n,a]=p.useState(s);return p.useEffect(()=>{const r=setTimeout(()=>{a(s)},t);return()=>{clearTimeout(r)}},[s]),n}const Fe="_root_ld61j_1",Ge="_glass_ld61j_20",Y={root:Fe,glass:Ge},Ve=({userStyles:s="",placeholder:t})=>{const n=A(),[a,r]=p.useState(""),l=$e(a,300);return p.useEffect(()=>{n(ie(l))},[l]),e.jsxs("div",{className:v([Y.root,s]),children:[e.jsx(k,{userStyles:Y.glass,icon:"glass"}),e.jsx("input",{type:"text",name:"searchinput",maxLength:30,placeholder:t,value:a,onChange:i=>r(i.target.value)})]})},Ye="_root_1hvr8_1",Ue="_margin_1hvr8_7",U={root:Ye,margin:Ue},He=({userStyles:s=""})=>e.jsxs("div",{className:v([U.root,s]),children:[e.jsx(Ve,{placeholder:"Search"}),e.jsx(Re,{userStyles:U.margin})]}),Ke="_root_3eyn4_1",We="_divider_3eyn4_17",M={root:Ke,"root-wrapper":"_root-wrapper_3eyn4_10",divider:We},ze=()=>e.jsx("div",{className:M.root,children:e.jsxs("div",{className:M["root-wrapper"],children:[e.jsx(He,{}),e.jsx("div",{className:M.divider}),e.jsx(Oe,{})]})}),qe=ze;export{qe as default};
